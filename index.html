<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Works-Shose Li</title>
  <meta name="author" content="chengyubing">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=0">
  <meta name="apple-touch-fullscreen" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" href="./styles/css/common.css"/>
  <link rel="stylesheet" href="./styles/css/work.css"/>
</head>
<body>
<div class="the_wrap">
  <div class="mobile_navi_wrap">
    <div class="mobild_navi_box" id="box">
      <div class="mobile_navi">
        <ul class="mobile_navi_list">
          <li class="navi works">
            <a href="/shoes/" class="navi_works">
              WORK
            </a>
          </li>
          <li class="navi">
            <a href="/shoes/about/" class="navi_about">
              ABOUT
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="mobile_menu_link" id="menu">
      MENU
    </div>
  </div>
  <div class="header">
    <div id="logo">
      <h1 class="shoes-li logo">
        <a href="/">SHOSE LI</a>
      </h1>
    </div>
    <div class="navigations">
      <ul class="navi_list">
        <li class="navi works">
          <a href="/shoes/" class="navi_works">
            WORK
          </a>
        </li>
        <li class="navi">
          <a href="/shoes/about/" class="navi_about">
            ABOUT
          </a>
        </li>
      </ul>
    </div>
  </div>
  <div id="work_cont" class="work_cont">
    <div class="work_page clearfix">
      <div class="work_info">
        <h2 class="info_title">CONNECTOWLS</h2>
        <div class="work_description">
          <p>UI and Character design for ConnectOwls. It is an App that can collect and breed digital owls. Each owl has 8 randomly-combined attributes. So that each Owl is unique and 100% owned by you. It cannot be copied, taken away, or destroyed.</p>
        </div>
      </div>
      <div class="img_list">
        <ul>
          <li>
            <img src="./styles/img/1/1.gif" alt=""/>
          </li>
          <li>
            <img src="./styles/img/1/1.gif" alt=""/>
          </li>
          <li>
            <img src="./styles/img/1/1.gif" alt=""/>
          </li>
          <li>
            <img src="./styles/img/1/1.gif" alt=""/>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="project-controls clearfix">
    <span class="back">Back to Work</span>
    <div class="word_navi">
      <span class="prev" id="prev">prev</span>
      /
      <span class="next" id="next">next</span>
    </div>
  </div>
  <div class="work_list_wrap">
    <ul id="work_list" class="work_list clearfix">

    </ul>
  </div>
</div>

<script>
  (function(){
    var workListInfo = [
      {
        name: 'ConnectOwls',
        picNum: 7,
        imgUrlList: [
          './styles/img/1/1.gif',
          './styles/img/1/2.gif',
          './styles/img/1/3.jpg',
          './styles/img/1/4.jpg',
          './styles/img/1/5.jpg',
          './styles/img/1/6.jpg',
          './styles/img/1/7.jpg'
        ],
        workInfo: 'Branding design for Éclavour Skincare Cosmetic.'
      },
      {
        name: 'ConnectOwls',
        picNum: 7,
        imgUrlList: [
          './styles/img/2/1.jpg'
        ],
        workInfo: 'Branding design for Éclavour Skincare Cosmetic.'
      },
      {
        name: 'ConnectOwls',
        picNum: 7,
        imgUrlList: [
          './styles/img/1/1.gif'
        ],
        workInfo: 'Branding design for Éclavour Skincare Cosmetic.'
      },
      {
        name: 'ConnectOwls',
        picNum: 7,
        imgUrlList: [
          './styles/img/1/1.gif'
        ],
        workInfo: 'Branding design for Éclavour Skincare Cosmetic.'
      }
    ],
      $workList = document.getElementById('work_list');

    var Tool = function(targetDom, list){
      this.list = list || [];
      this.len = this.list.length - 1;
      this.targetDom = targetDom;
      this.htmlCont = '';
      this.index = 0;
      this.$cont = document.getElementById('work_cont');
      this.$prev = document.getElementById('prev');
      this.$next = document.getElementById('next');
    }

    Tool.prototype = {
      handleList: function(){
        var that = this;
        this.list.map(function(item, index){
          var imgUrl = item && Array.isArray(item.imgUrlList) && item.imgUrlList[0];
          var mask = '<div class="work_mask"><div class="work_title">' + item.name + '</div></div>';
          var imgWrap = '<div class="img_wrap" style="background-image: url(' + imgUrl + ');"></div>';
          var fragment = '<li class="work_item">' + imgWrap + mask + '</li>';
          that.htmlCont += fragment;
        });
        return that.htmlCont;
      },
      initCont: function(){
        this.targetDom.innerHTML = this.handleList();
      },
      initNavi: function(){
        var that = this;
        this.$next.addEventListener('click', this.nextWord.bind(this));
        this.$prev.addEventListener('click', this.PrevWord.bind(this));
        var items = document.getElementsByClassName('work_item');
        for(var i = 0, len = items.length; i < len; i ++){
          (function(i){
            items[i].addEventListener('click', function(){
              that.initPage(i);
            })
          })(i)
        }
      },
      initPage: function(num){
        this.index = num;
        var pageCont = '';
        var imgList = '';
        var info = '<h2 class="info_title">' + this.list[num].name.toUpperCase() + '</h2><div class="work_description"><p>' + this.list[num].workInfo + '</p> </div>'
        Array.isArray(this.list[num].imgUrlList) && this.list[num].imgUrlList.map(function(item, index){
          var frag = '<li><img src="' + item + '" alt=""/></li>';
          imgList += frag;
        });
        pageCont += '<div class="work_page"><div class="work_info">' + info + '</div><div class="img_list"> <ul>' + imgList + '</ul></div></div>';
        this.$cont.innerHTML = pageCont;
        this.$cont.style.display = 'block';
        window.scrollTo(0,0);
        this.changeStatus();
      },
      nextWord: function(){
        if(this.index >= this.len){
          console.error('超出作品数量');
          return false;
        } else {
          this.index += 1;
          this.initPage(this.index);
          this.changeStatus()
        }

      },
      PrevWord: function(){
        if(this.index <= 0 ){
          console.error('没有index为0的作品');
          return false;
        } else {
          this.index -= 1;
          this.initPage(this.index);
          this.changeStatus()
        }
      },
      changeStatus: function(){
        if(this.index <= 0){
          this.$prev.style.cursor = 'default';
          this.$next.style.cursor = 'pointer';
        } else if(this.index >= this.len){
          this.$prev.style.cursor = 'pointer';
          this.$next.style.cursor = 'default';
        } else {
          this.$prev.style.cursor = 'pointer';
          this.$next.style.cursor = 'pointer';
        }
      }
    }

    var myTool = new Tool($workList, workListInfo);
    myTool.initCont();
    myTool.initNavi();
    myTool.initPage(0);
  })()
</script>
</body>
</html>